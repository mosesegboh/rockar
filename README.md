## Symlinks

Docker for Windows does not create legitimate Windows symlinks outside the container when mounted volumes are used. There is no problem with the symlinks within the container itself.

Symlinks in folders that are generated by `composer` be ignored. These build folders have already been added to `.gitignore`.

The following symlinks have been removed and included in `.gitignore`:
- `web/app/design/adminhtml/default/rockar/template/amaudit/tab/view/details.phtml`
- `web/lib/TijsVerkoyen/CssToInlineStyles.php`
- `web/skin/adminhtml/default/rockar/custom.css`
- `web/skin/frontend/rockar/gulpfile.js`
- `web/skin/frontend/rockar/package.json`

These files will be copied as part of the `post-update-cmd` task.

## Database dump file

Obtain the `peppermint-clean.sql` dump file and load it. 

## Docker Compose

### .env file

Compose supports declaring default environment variables in an environment file named `.env` placed in the folder where the `docker-compose` command is executed (current working directory).

In the repo root is an `.env.template` file that you should rename to `.env`

Update the **SSH_PRIVATE_KEY_FILE** variable to point at the private SSH key corresponding to your public SSH key that you uploaded to Bitbucket.

Update the MYSQL variables.

### Commands

The Docker Engine must be running and commands must be run within the repo root.

| Command | Description |
|---|---|
| `docker-compose start` | Start all containers |
| `docker-compose stop`  | Stop all containers (keeps any config changes you've made to the containers) |
| `docker-compose up -d --build --force-recreate` | Recreate all containers |
| `docker-compose down`  | Tear down all containers |
| `docker-compose exec php-fpm bash`  | Open a bash terminal in the PHP container |
| `docker-compose ps` | Show running containers |
|

### Make

A Make file has been created with a set of useful tasks

| Command | Description |
|---|---|
| `make up` | Start all containers |
| `make stop`  | Stop all containers (keeps any config changes you've made to the containers) |
| `make rebuild` | Recreate all containers |
| `make down`  | Tear down all containers |
| `make php`  | Open a bash terminal in the PHP container |
| `make mysql`  | Open a MySQL cli in the MySQL container |
| `make dev_tools` | Open a bash terminal in the Dev_tools container |
| `make db_import` | Import the UAT DB dump file and set local config |
| `make dev_tools_init` | Run Composer, npm and Gulp on the code base. And run the finance calculation in the Dev_tools container |
| `make dev_tools_install` | Run Composer, npm and Gulp on the code base, in the Dev_tools container |
| `make dev_tools_finance` | Run the finance calculation, in the Dev_tools container |
|
